{{!
@template block_hellocharly/main

Template principal du bloc Hello Charly

Variables de contexte requises :
* userid - ID de l'utilisateur
* buttontext - Texte du bouton
* sesskey - Clé de session pour sécurité
}}

<div class="block-hellocharly" data-userid="{{userid}}" data-sesskey="{{sesskey}}">
    <div class="text-center">
        <button type="button" class="btn btn-primary hellocharly-access-btn" id="hellocharly-btn">
            <i class="fa fa-external-link" aria-hidden="true"></i>
            {{buttontext}}
        </button>
    </div>

    <!-- Spinner visible au chargement -->
    <div class="hellocharly-spinner text-center mt-3" style="display: none;">
        <i class="fa fa-spinner fa-spin"></i>
        {{#str}}loading_progress, block_hellocharly{{/str}}
    </div>

    <!-- Zone d’affichage de la progression, cachée au départ -->
    <div class="hellocharly-loading mt-3" style="display: none;">
        <!-- Le contenu injecté par JS -->
    </div>
</div>

{{#js}}
require(['block_hellocharly/progression'], function(module) {
    module.init();
});
{{/js}}